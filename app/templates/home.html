{% extends "base.html" %}
{% block content %}
<h2>Products</h2>

<div class="filters">
  <strong>Categories:</strong>
  <a href="{{ url_for('main.home') }}">All</a>
  {% for c in categories %}
    <a href="{{ url_for('main.home', category=c) }}">{{ c }}</a>
  {% endfor %}
</div>

<div class="grid">
  {% for p in products %}
  <div class="card">
    <img src="{{ p.image_url }}" alt="{{ p.name }}">
    <h3>{{ p.name }}</h3>
    <p class="price">${{ "%.2f"|format(p.price) }}</p>
    <p style="color: #28a745; font-weight: bold;">Stock: {{ p.stock }} available</p>
    <p>{{ p.description[:80] }}{% if p.description|length > 80 %}...{% endif %}</p>
    <a class="btn" href="{{ url_for('main.product_detail', product_id=p.id) }}">View</a>
    <a class="btn" href="{{ url_for('main.add_to_cart', product_id=p.id) }}">Add to Cart</a>
  </div>
  {% else %}
    <p>No products found.</p>
  {% endfor %}
</div>
{% endblock %}
